# The main purpose of this container is to generate DHCP traffic.
# for the time being it's being simple (just send DHCPv4 traffic to
# admin-kea), but in the future it may possible generate a lot more.
FROM ubuntu:18.04
WORKDIR /agent
# Install essentials.
RUN apt-get update && apt-get install -y --no-install-recommends sudo curl ca-certificates gnupg apt-transport-https supervisor
RUN curl -1sLf 'https://dl.cloudsmith.io/public/isc/kea-1-7/cfg/setup/bash.deb.sh' | bash
# Install perfdhcp
RUN apt-get update && apt-get install -y --no-install-recommends isc-kea-admin=1.7.4-isc0012520200128102739 && mkdir -p /var/run/kea/
# Copy supervisor script that will run perfdhcp
COPY docker/supervisor-perfdhcp4.conf /etc/supervisor.conf
# Start supervisor.
CMD ["supervisord", "-c", "/etc/supervisor.conf"]
